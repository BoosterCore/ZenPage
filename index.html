<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的导航页面</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/modals.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <!-- 页面内容包装器 -->
    <div id="content-wrapper">
        <div class="container">
            <!-- 头部控制按钮 -->
            <div class="header-controls">
                <div class="control-buttons">
                    <button id="addSectionBtn" class="add-section-btn" style="display: none;">+ 添加分组</button>
                    <button id="importConfigBtn" class="import-export-btn" style="display: none;">↓ 导入配置</button>
                    <button id="exportConfigBtn" class="import-export-btn" style="display: none;">↑ 导出配置</button>
                    <input type="file" id="importConfigInput" accept=".json" style="display: none;">
                    <button id="editModeToggle" class="edit-toggle-btn">编辑模式</button>
                </div>
            </div>
            
            <h1 id="pageTitle" contenteditable="false">我要去冲浪！</h1>
            
            <div id="sectionsContainer">
                <!-- 分组将通过JavaScript渲染 -->
            </div>
        </div>
    </div>
    
    <!-- 页面设置模态框 -->
    <div class="modal" id="settingsModal">
        <div class="modal-content glass-effect">
            <div class="modal-header">
                <h3>页面设置</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="settings-container">
                    <!-- 标题设置区块 -->
                    <div class="settings-section">
                        <h4 class="settings-section-title">标题设置</h4>
                        
                        <div class="setting-group">
                            <label for="pageTitleInput">页面标题:</label>
                            <input type="text" id="pageTitleInput" class="glass-input" placeholder="请输入页面标题">
                        </div>
                        
                        <div class="setting-group">
                            <div class="setting-row">
                                <div class="setting-col">
                                    <label for="fontFamily">标题字体:</label>
                                    <select id="fontFamily" class="glass-input">
                                        <option value="Arial, sans-serif">Arial</option>
                                        <option value="'Times New Roman', serif">Times New Roman</option>
                                        <option value="'Courier New', monospace">Courier New</option>
                                        <option value="Verdana, sans-serif">Verdana</option>
                                        <option value="Georgia, serif">Georgia</option>
                                        <option value="'Microsoft YaHei', sans-serif">微软雅黑</option>
                                    </select>
                                </div>
                                
                                <div class="setting-col">
                                    <label for="fontStyle">字体样式:</label>
                                    <select id="fontStyle" class="glass-input">
                                        <option value="normal">正常</option>
                                        <option value="bold">粗体</option>
                                        <option value="italic">斜体</option>
                                        <option value="bold italic">粗体+斜体</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="setting-row">
                                <div class="setting-col">
                                    <label for="fontSize">标题字号:</label>
                                    <div class="slider-container">
                                        <input type="range" id="fontSize" min="20" max="100" value="56" class="glass-slider">
                                        <span id="fontSizeValue">56px</span>
                                    </div>
                                </div>
                                
                                <div class="setting-col">
                                    <label for="fontColor">标题颜色:</label>
                                    <div class="color-picker-container">
                                        <input type="color" id="fontColor" value="#ffffff" class="glass-color-picker">
                                        <div id="fontColorPreview" class="color-preview" style="background-color: #ffffff;"></div>
                                        <span id="fontColorValue">#ffffff</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 页面色彩区块 -->
                    <div class="settings-section">
                        <h4 class="settings-section-title">页面色彩</h4>
                        
                        <div class="setting-group">
                            <div class="setting-row">
                                <div class="setting-col">
                                    <label for="pageBgColor">页面底色:</label>
                                    <div class="color-picker-container">
                                        <input type="color" id="pageBgColor" value="#333333" class="glass-color-picker">
                                        <div id="pageBgColorPreview" class="color-preview" style="background-color: #333333;"></div>
                                        <span id="pageBgColorValue">#333333</span>
                                    </div>
                                </div>
                                
                                <div class="setting-col">
                                    <label for="gradientAngle">渐变角度:</label>
                                    <div class="slider-container">
                                        <input type="range" id="gradientAngle" min="0" max="360" value="90" class="glass-slider">
                                        <span id="gradientAngleValue">90°</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="setting-group">
                            <label for="imageUpload">UI幻化 (上传图片自动生成配色):</label>
                            <div class="file-upload-wrapper">
                                <input type="file" id="imageUpload" accept="image/*" class="glass-file-input">
                                <button type="button" id="imageUploadButton" class="glass-button secondary">选择图片</button>
                            </div>
                            <div class="ui-magic-preview" id="colorPalettePreview" style="display: none; margin-top: 10px;">
                                <div class="color-palette-container">
                                    <div class="palette-title">提取的颜色：</div>
                                    <div id="colorPalette" class="color-palette"></div>
                                </div>
                            </div>
                            <div class="setting-group-actions">
                                <button id="applyColorScheme" class="glass-button primary" style="display: none;">应用配色方案</button>
                                <button id="resetStyles" class="glass-button secondary">重置UI配色</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 链接编辑模态框 -->
    <div class="modal" id="linkEditModal">
        <div class="modal-content glass-effect">
            <div class="modal-header">
                <h3 id="linkModalTitle">编辑链接</h3>
                <span class="close">&times;</span>
            </div>
            <form id="linkEditForm">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="editLinkUrl">链接地址:</label>
                        <input type="url" id="editLinkUrl" required class="glass-input">
                    </div>
                    <div class="form-group">
                        <label for="editLinkName">链接名称:</label>
                        <input type="text" id="editLinkName" required class="glass-input">
                    </div>
                    <div class="form-group">
                        <label for="editLinkIcon">图标 (emoji或文本):</label>
                        <input type="text" id="editLinkIcon" maxlength="4" class="glass-input">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="glass-button primary">保存</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 分组编辑模态框 -->
    <div class="modal" id="sectionEditModal">
        <div class="modal-content glass-effect">
            <div class="modal-header">
                <h3 id="sectionModalTitle">编辑分组</h3>
                <span class="close">&times;</span>
            </div>
            <form id="sectionEditForm">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="editSectionTitle">分组标题:</label>
                        <input type="text" id="editSectionTitle" required class="glass-input">
                    </div>
                    <div class="form-group">
                        <label for="editSectionBgColor">分组背景色:</label>
                        <div class="color-picker-container with-note">
                            <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
                                <input type="color" id="editSectionBgColor" value="#444444" class="glass-color-picker">
                                <div id="editSectionColorPreview" class="color-preview" style="background-color: #444444;"></div>
                                <span id="editSectionColorValue">#444444</span>
                            </div>
                            <div class="section-edit-preview-note">注意！颜色调整能实时预览，但保存后才实际生效！</div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="glass-button primary">保存</button>
                    <button type="button" id="deleteSectionBtn" class="glass-button danger">删除分组</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 导出配置模态框 -->
    <div class="modal" id="exportConfigModal">
        <div class="modal-content glass-effect" style="max-width: 500px;">
            <div class="modal-header">
                <h3>导出配置</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label for="exportConfigName">配置名称:</label>
                    <input type="text" id="exportConfigName" class="glass-input" placeholder="请输入配置名称" value="navigation_config">
                </div>
                <div class="setting-group">
                    <label for="exportConfigFormat">文件格式:</label>
                    <select id="exportConfigFormat" class="glass-input">
                        <option value="json">JSON (*.json)</option>
                    </select>
                </div>
                <div class="setting-group">
                    <p class="section-edit-preview-note">
                        导出的配置文件将包含页面标题、样式设置、分组和链接数据。
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelExportBtn" class="glass-button secondary">取消</button>
                <button id="confirmExportBtn" class="glass-button primary">导出</button>
            </div>
        </div>
    </div>

    <!-- 导入配置模态框 -->
    <div class="modal" id="importConfigModal">
        <div class="modal-content glass-effect" style="max-width: 500px;">
            <div class="modal-header">
                <h3>导入配置</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label for="importConfigFilePath">选择配置文件:</label>
                    <div class="setting-group-actions">
                        <input type="file" id="importConfigFilePath" accept=".json" style="display: none;">
                        <button id="browseConfigFileBtn" class="glass-button">浏览文件...</button>
                        <span id="selectedFileName" class="section-edit-preview-note" style="flex: 1; padding-left: 10px;">未选择文件</span>
                    </div>
                </div>
                <div class="setting-group">
                    <p class="section-edit-preview-note" style="color: rgba(255, 165, 0, 0.8);">
                        <strong>注意:</strong> 导入配置将覆盖当前所有设置，包括页面标题、样式、分组和链接。
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelImportBtn" class="glass-button secondary">取消</button>
                <button id="confirmImportBtn" class="glass-button primary">导入</button>
            </div>
        </div>
    </div>

    <!-- 背景遮罩层 -->
    <div id="modalBackdrop" class="modal-backdrop"></div>
    
    <script src="js/utils.js"></script>
    <script src="js/eventBus.js"></script>
    <script src="js/stateManager.js"></script>
    <script src="js/errorHandler.js"></script>
    <script src="js/dataAPI.js"></script>
    <script src="js/data.js"></script>
    <script src="js/styles.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/links.js"></script>
    <script src="js/sections.js"></script>
    <script src="js/dragdrop.js"></script>
    <script src="js/app.js"></script>
    <script src="js/uiMagic.js"></script>
</body>
</html>